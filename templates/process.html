<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Process Video</title>
  </head>
  <body>
    <h1>Process Video: {{ filename }}</h1>
    <video id="video" width="320" height="240" controls>
      <source
        src="{{ url_for('uploaded_file', filename=filename) }}"
        type="video/mp4"
      />
      Your browser does not support the video tag.
    </video>
    <form action="" method="post">
      <label for="start_time">Start Time (seconds):</label>
      <input type="text" id="start_time" name="start_time" /><br /><br />
      <label for="end_time">End Time (seconds):</label>
      <input type="text" id="end_time" name="end_time" /><br /><br />
      
      <div id="clips">
        <label>Clips to Cut (start and end times in seconds):</label><br />
        <div class="clip">
        </div>
      </div>
      <button type="button" onclick="addClip()">Add Another Clip</button><br /><br />
      
      <input type="submit" value="Clip Video and Extract Audio" />
    </form>
    <button onclick="setStartTime()">Set Start Time</button>
    <button onclick="setEndTime()">Set End Time</button>

    <script>
      const video = document.getElementById("video");

      function setStartTime() {
        document.getElementById("start_time").value = video.currentTime;
      }

      function setEndTime() {
        document.getElementById("end_time").value = video.currentTime;
      }

      function addClip() {
        const clipsDiv = document.getElementById("clips");
        const newClipDiv = document.createElement("div");
        newClipDiv.classList.add("clip");
        newClipDiv.innerHTML = `
          <input type="text" name="clip_start[]" placeholder="Start Time" />
          <input type="text" name="clip_end[]" placeholder="End Time" /><br />
        `;
        clipsDiv.appendChild(newClipDiv);
      }
    </script>
  </body>
</html>